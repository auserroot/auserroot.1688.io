(function(a,j,i){var b=a.event,c,h;c=b.special.debouncedresize={setup:function(){a(this).on("resize",c.handler)},teardown:function(){a(this).off("resize",c.handler)},handler:function(n,o){var l=this,k=arguments,m=function(){n.type="debouncedresize";b.dispatch.apply(l,k)};if(h){clearTimeout(h)}o?m():h=setTimeout(m,c.threshold)},threshold:150};var e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(n){var l=this,o=a.isFunction(a.Deferred)?a.Deferred():0,q=a.isFunction(o.notify),k=l.find("img").add(l.filter("img")),s=[],t=[],m=[];if(a.isPlainObject(n)){a.each(n,function(u,v){if(u==="callback"){n=v}else{if(o){o[u](v)}}})}function p(){var v=a(t),u=a(m);if(o){if(m.length){o.reject(k,v,u)}else{o.resolve(k)}}if(a.isFunction(n)){n.call(l,k,v,u)}}function r(u,v){if(u.src===e||a.inArray(u,s)!==-1){return}s.push(u);if(v){m.push(u)}else{t.push(u)}a.data(u,"imagesLoaded",{isBroken:v,src:u.src});if(q){o.notifyWith(a(u),[v,k,a(t),a(m)])}if(k.length===s.length){setTimeout(p);k.unbind(".imagesLoaded")}}if(!k.length){p()}else{k.bind("load.imagesLoaded error.imagesLoaded",function(u){r(u.target,u.type==="error")}).each(function(w,v){var x=v.src;var u=a.data(v,"imagesLoaded");if(u&&u.src===x){r(v,u.isBroken);return}if(v.complete&&v.naturalWidth!==i){r(v,v.naturalWidth===0||v.naturalHeight===0);return}if(v.readyState||v.complete){v.src=e;v.src=x}})}return o?o.promise(l):l};var d=a(j),g=j.Modernizr;a.Elastislide=function(l,k){this.$el=a(k);this._init(l)};a.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(k,m,l){return false},onReady:function(){return false},onBeforeSlide:function(){return false},onAfterSlide:function(){return false}};a.Elastislide.prototype={_init:function(k){this.options=a.extend(true,{},a.Elastislide.defaults,k);var l=this,m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=m[g.prefixed("transition")];this.support=g.csstransitions&&g.csstransforms;this.current=this.options.start;this.isSliding=false;this.$items=this.$el.children("li");this.itemsCount=this.$items.length;if(this.itemsCount===0){return false}this._validate();this.$items.detach();this.$el.empty();this.$el.append(this.$items);this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>');this.hasTransition=false;this.hasTransitionTimeout=setTimeout(function(){l._addTransition()},100);this.$el.imagesLoaded(function(){l.$el.show();l._layout();l._configure();if(l.hasTransition){l._removeTransition();l._slideToItem(l.current);l.$el.on(l.transEndEventName,function(){l.$el.off(l.transEndEventName);l._setWrapperSize();l._addTransition();l._initEvents()})}else{clearTimeout(l.hasTransitionTimeout);l._setWrapperSize();l._initEvents();l._slideToItem(l.current);setTimeout(function(){l._addTransition()},25)}l.options.onReady()})},_validate:function(){if(this.options.speed<0){this.options.speed=500}if(this.options.minItems<1||this.options.minItems>this.itemsCount){this.options.minItems=1}if(this.options.start<0||this.options.start>this.itemsCount-1){this.options.start=0}if(this.options.orientation!="horizontal"&&this.options.orientation!="vertical"){this.options.orientation="horizontal"}},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>');this.$carousel=this.$el.parent();this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var k=this.$items.find("img:first");this.imgSize={width:k.outerWidth(true),height:k.outerHeight(true)};this._setItemsSize();this.options.orientation==="horizontal"?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height);this._addControls()},_addTransition:function(){if(this.support){this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing)}this.hasTransition=true},_removeTransition:function(){if(this.support){this.$el.css("transition","all 0s")}this.hasTransition=false},_addControls:function(){var k=this;this.$navigation=a('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper);this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(l){k._slide("prev");return false});this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(l){k._slide("next");return false})},_setItemsSize:function(){var k=this.options.orientation==="horizontal"?(Math.floor(this.$carousel.width()/this.options.minItems)*100)/this.$carousel.width():100;this.$items.css({width:k+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height});if(this.options.orientation==="vertical"){this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))}},_setWrapperSize:function(){if(this.options.orientation==="vertical"){this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})}},_configure:function(){this.fitCount=this.options.orientation==="horizontal"?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var k=this;d.on("debouncedresize.elastislide",function(){k._setItemsSize();k._configure();k._slideToItem(k.current)});this.$el.on(this.transEndEventName,function(){k._onEndTransition()});if(this.options.orientation==="horizontal"){this.$el.on({swipeleft:function(){k._slide("next")},swiperight:function(){k._slide("prev")}})}else{this.$el.on({swipeup:function(){k._slide("next")},swipedown:function(){k._slide("prev")}})}this.$el.on("click.elastislide","li",function(m){var l=a(this);k.options.onClick(l,l.index(),m)})},_destroy:function(k){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide");d.off(".elastislide");this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper);this.$items.css({width:"auto","max-width":"none","max-height":"none"});this.$navigation.remove();this.$wrapper.remove();if(k){k.call()}},_toggleControls:function(k,l){if(l){(k==="next")?this.$navNext.show():this.$navPrev.show()}else{(k==="next")?this.$navNext.hide():this.$navPrev.hide()}},_slide:function(l,s){if(this.isSliding){return false}this.options.onBeforeSlide();this.isSliding=true;var o=this,r=this.translation||0,n=this.options.orientation==="horizontal"?this.$items.outerWidth(true):this.$items.outerHeight(true),q=this.itemsCount*n,t=this.options.orientation==="horizontal"?this.$carousel.width():this.$carousel.height();if(s===i){var k=this.fitCount*n;if(k<0){return false}if(l==="next"&&q-(Math.abs(r)+k)<t){k=q-(Math.abs(r)+t);this._toggleControls("next",false);this._toggleControls("prev",true)}else{if(l==="prev"&&Math.abs(r)-k<0){k=Math.abs(r);this._toggleControls("next",true);this._toggleControls("prev",false)}else{var m=l==="next"?Math.abs(r)+Math.abs(k):Math.abs(r)-Math.abs(k);m>0?this._toggleControls("prev",true):this._toggleControls("prev",false);m<q-t?this._toggleControls("next",true):this._toggleControls("next",false)}}s=l==="next"?r-k:r+k}else{var k=Math.abs(s);if(Math.max(q,t)-k<t){s=-(Math.max(q,t)-t)}k>0?this._toggleControls("prev",true):this._toggleControls("prev",false);Math.max(q,t)-t>k?this._toggleControls("next",true):this._toggleControls("next",false)}this.translation=s;if(r===s){this._onEndTransition();return false}if(this.support){this.options.orientation==="horizontal"?this.$el.css("transform","translateX("+s+"px)"):this.$el.css("transform","translateY("+s+"px)")}else{a.fn.applyStyle=this.hasTransition?a.fn.animate:a.fn.css;var p=this.options.orientation==="horizontal"?{left:s}:{top:s};this.$el.stop().applyStyle(p,a.extend(true,[],{duration:this.options.speed,complete:function(){o._onEndTransition()}}))}if(!this.hasTransition){this._onEndTransition()}},_onEndTransition:function(){this.isSliding=false;this.options.onAfterSlide()},_slideTo:function(m){var m=m||this.current,o=Math.abs(this.translation)||0,l=this.options.orientation==="horizontal"?this.$items.outerWidth(true):this.$items.outerHeight(true),n=o+this.$carousel.width(),k=Math.abs(m*l);if(k+l>n||k<o){this._slideToItem(m)}},_slideToItem:function(l){var k=this.options.orientation==="horizontal"?l*this.$items.outerWidth(true):l*this.$items.outerHeight(true);this._slide("",-k)},add:function(l){var n=this,m=this.current,k=this.$items.eq(this.current);this.$items=this.$el.children("li");this.itemsCount=this.$items.length;this.current=k.index();this._setItemsSize();this._configure();this._removeTransition();m<this.current?this._slideToItem(this.current):this._slide("next",this.translation);setTimeout(function(){n._addTransition()},25);if(l){l.call()}},setCurrent:function(l,k){this.current=l;this._slideTo();if(k){k.call()}},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(k){this._destroy(k)}};var f=function(k){if(j.console){j.console.error(k)}};a.fn.elastislide=function(l){var m=a.data(this,"elastislide");if(typeof l==="string"){var k=Array.prototype.slice.call(arguments,1);this.each(function(){if(!m){f("cannot call methods on elastislide prior to initialization; attempted to call method '"+l+"'");return}if(!a.isFunction(m[l])||l.charAt(0)==="_"){f("no such method '"+l+"' for elastislide self");return}m[l].apply(m,k)})}else{this.each(function(){if(m){m._init()}else{m=a.data(this,"elastislide",new a.Elastislide(l,this))}})}return m}})(jQuery,window);