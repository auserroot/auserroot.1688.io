"use strict";!function(c,i,u){var o,a=c.event,r=a.special.debouncedresize={setup:function(){c(this).on("resize",r.handler)},teardown:function(){c(this).off("resize",r.handler)},handler:function(t,i){function s(){t.type="debouncedresize",a.dispatch.apply(n,e)}var n=this,e=arguments;o&&clearTimeout(o),i?s():o=setTimeout(s,r.threshold)},threshold:150},m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(s){var n=this,e=c.isFunction(c.Deferred)?c.Deferred():0,o=c.isFunction(e.notify),a=n.find("img").add(n.filter("img")),r=[],h=[],l=[];function d(){var t=c(h),i=c(l);e&&(l.length?e.reject(a,t,i):e.resolve(a)),c.isFunction(s)&&s.call(n,a,t,i)}function p(t,i){t.src!==m&&-1===c.inArray(t,r)&&(r.push(t),(i?l:h).push(t),c.data(t,"imagesLoaded",{isBroken:i,src:t.src}),o&&e.notifyWith(c(t),[i,a,c(h),c(l)]),a.length===r.length&&(setTimeout(d),a.unbind(".imagesLoaded")))}return c.isPlainObject(s)&&c.each(s,function(t,i){"callback"===t?s=i:e&&e[t](i)}),a.length?a.bind("load.imagesLoaded error.imagesLoaded",function(t){p(t.target,"error"===t.type)}).each(function(t,i){var s=i.src,n=c.data(i,"imagesLoaded");n&&n.src===s?p(i,n.isBroken):i.complete&&i.naturalWidth!==u?p(i,0===i.naturalWidth||0===i.naturalHeight):(i.readyState||i.complete)&&(i.src=m,i.src=s)}):d(),e?e.promise(n):n};var n=c(i),s=i.Modernizr;function e(t){i.console&&i.console.error(t)}c.Elastislide=function(t,i){this.$el=c(i),this._init(t)},c.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(t,i,s){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},c.Elastislide.prototype={_init:function(t){this.options=c.extend(!0,{},c.Elastislide.defaults,t);var i=this;if(this.transEndEventName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[s.prefixed("transition")],this.support=s.csstransitions&&s.csstransforms,this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){i._addTransition()},100),this.$el.imagesLoaded(function(){i.$el.show(),i._layout(),i._configure(),i.hasTransition?(i._removeTransition(),i._slideToItem(i.current),i.$el.on(i.transEndEventName,function(){i.$el.off(i.transEndEventName),i._setWrapperSize(),i._addTransition(),i._initEvents()})):(clearTimeout(i.hasTransitionTimeout),i._setWrapperSize(),i._initEvents(),i._slideToItem(i.current),setTimeout(function(){i._addTransition()},25)),i.options.onReady()})},_validate:function(){this.options.speed<0&&(this.options.speed=500),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var t=this.$items.find("img:first");this.imgSize={width:t.outerWidth(!0),height:t.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var i=this;this.$navigation=c('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(t){return i._slide("prev"),!1}),this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(t){return i._slide("next"),!1})},_setItemsSize:function(){var t="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:t+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var s=this;n.on("debouncedresize.elastislide",function(){s._setItemsSize(),s._configure(),s._slideToItem(s.current)}),this.$el.on(this.transEndEventName,function(){s._onEndTransition()}),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){s._slide("next")},swiperight:function(){s._slide("prev")}}):this.$el.on({swipeup:function(){s._slide("next")},swipedown:function(){s._slide("prev")}}),this.$el.on("click.elastislide","li",function(t){var i=c(this);s.options.onClick(i,i.index(),t)})},_destroy:function(t){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide"),n.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),t&&t.call()},_toggleControls:function(t,i){i?("next"===t?this.$navNext:this.$navPrev).show():("next"===t?this.$navNext:this.$navPrev).hide()},_slide:function(t,i){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var s=this,n=this.translation||0,e="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),o=this.itemsCount*e,a="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(i===u){if((r=this.fitCount*e)<0)return!1;"next"===t&&o-(Math.abs(n)+r)<a?(r=o-(Math.abs(n)+a),this._toggleControls("next",!1),this._toggleControls("prev",!0)):"prev"===t&&Math.abs(n)-r<0?(r=Math.abs(n),this._toggleControls("next",!0),this._toggleControls("prev",!1)):(0<(e="next"===t?Math.abs(n)+Math.abs(r):Math.abs(n)-Math.abs(r))?this._toggleControls("prev",!0):this._toggleControls("prev",!1),e<o-a?this._toggleControls("next",!0):this._toggleControls("next",!1)),i="next"===t?n-r:n+r}else{var r=Math.abs(i);Math.max(o,a)-r<a&&(i=-(Math.max(o,a)-a)),0<r?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(o,a)-a>r?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(n===(this.translation=i))return this._onEndTransition(),!1;this.support?"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+i+"px)"):this.$el.css("transform","translateY("+i+"px)"):(c.fn.applyStyle=this.hasTransition?c.fn.animate:c.fn.css,i="horizontal"===this.options.orientation?{left:i}:{top:i},this.$el.stop().applyStyle(i,c.extend(!0,[],{duration:this.options.speed,complete:function(){s._onEndTransition()}}))),this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(t){var t=t||this.current,i=Math.abs(this.translation)||0,s="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),n=i+this.$carousel.width(),e=Math.abs(t*s);(n<e+s||e<i)&&this._slideToItem(t)},_slideToItem:function(t){t="horizontal"===this.options.orientation?t*this.$items.outerWidth(!0):t*this.$items.outerHeight(!0);this._slide("",-t)},add:function(t){var i=this,s=this.current,n=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=n.index(),this._setItemsSize(),this._configure(),this._removeTransition(),s<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){i._addTransition()},25),t&&t.call()},setCurrent:function(t,i){this.current=t,this._slideTo(),i&&i.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(t){this._destroy(t)}},c.fn.elastislide=function(t){var i,s=c.data(this,"elastislide");return"string"==typeof t?(i=Array.prototype.slice.call(arguments,1),this.each(function(){s?c.isFunction(s[t])&&"_"!==t.charAt(0)?s[t].apply(s,i):e("no such method '"+t+"' for elastislide self"):e("cannot call methods on elastislide prior to initialization; attempted to call method '"+t+"'")})):this.each(function(){s?s._init():s=c.data(this,"elastislide",new c.Elastislide(t,this))}),s}}(jQuery,window);