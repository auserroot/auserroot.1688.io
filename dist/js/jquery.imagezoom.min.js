"use strict";!function(l,d){l.ImageZoom=function(e,o){function m(e){e=parseInt(e);return isNaN(e)?0:e}var p=this;p.$el=l(e),p.$el.data("imagezoom",p),p.init=function(e){p.options=l.extend({},l.ImageZoom.defaults,e),p.$viewer=l('<div class="zm-viewer '+p.options.zoomViewerClass+'"></div>').appendTo(".g_box"),p.$handler=l('<div class="zm-handler'+p.options.zoomHandlerClass+'"></div>').appendTo(".g_box"),p.isBigImageReady=-1,p.$largeImg=null,p.isActive=!1,p.$handlerArea=null,p.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),p.evt={x:-1,y:-1},p.options.bigImageSrc=""==p.options.bigImageSrc?p.$el.attr("src"):p.options.bigImageSrc,(new Image).src=p.options.bigImageSrc,p.callIndex=l.ImageZoom._calltimes+1,p.animateTimer=null,l.ImageZoom._calltimes+=1,l(document).bind("mousemove.zoompro"+p.callIndex,function(e){p.isActive&&p.moveHandler(e.pageX,e.pageY)}),p.$el.bind("mouseover.zoompro",function(e){p.isActive=!0,p.showViewer(e)})},p.moveHandler=function(e,o){var t,i,s,n,a,r=p.$el.offset(),l=p.$el.outerWidth(),h=p.$el.outerHeight();e>=r.left&&e<=r.left+l&&o>=r.top&&o<=r.top+h?(r.left=r.left+m(p.$el.css("borderLeftWidth"))+m(p.$el.css("paddingLeft")),r.top=r.top+m(p.$el.css("borderTopWidth"))+m(p.$el.css("paddingTop")),l=p.$el.width(),h=p.$el.height(),e>=r.left&&e<=r.left+l&&o>=r.top&&o<=r.top+h&&(p.evt={x:e,y:o},"follow"==p.options.type&&p.$viewer.css({top:o-p.$viewer.outerHeight()/2,left:e-p.$viewer.outerWidth()/2}),1==p.isBigImageReady&&(s=o-r.top,o=e-r.left,"inner"==p.options.type?(t=-p.$largeImg.height()*s/h+s,i=-p.$largeImg.width()*o/l+o):"standard"==p.options.type?(n=o-p.$handlerArea.width()/2,a=s-p.$handlerArea.height()/2,e=p.$handlerArea.width(),r=p.$handlerArea.height(),n<0?n=0:l-e<n&&(n=l-e),a<0?a=0:h-r<a&&(a=h-r),i=-n/p.scale,t=-a/p.scale,p.isWebkit?(p.$handlerArea.css({opacity:.99}),setTimeout(function(){p.$handlerArea.css({top:a,left:n,opacity:1})},0)):p.$handlerArea.css({top:a,left:n})):"follow"==p.options.type&&(t=-p.$largeImg.height()/h*s+p.options.zoomSize[1]/2,i=-p.$largeImg.width()/l*o+p.options.zoomSize[0]/2,-t>p.$largeImg.height()-p.options.zoomSize[1]?t=-(p.$largeImg.height()-p.options.zoomSize[1]):0<t&&(t=0),-i>p.$largeImg.width()-p.options.zoomSize[0]?i=-(p.$largeImg.width()-p.options.zoomSize[0]):0<i&&(i=0)),p.options.smoothMove?(d.clearTimeout(p.animateTimer),p.smoothMove(i,t)):p.$viewer.find("img").css({top:t,left:i})))):(p.isActive=!1,p.$viewer.hide(),p.$handler.hide(),p.options.onHide(p),d.clearTimeout(p.animateTimer),p.animateTimer=null)},p.showViewer=function(o){var e,t,i,s=(s=p.$el.offset().top)+m(p.$el.css("borderTopWidth"))+m(p.$el.css("paddingTop")),n=(n=p.$el.offset().left)+m(p.$el.css("borderLeftWidth"))+m(p.$el.css("paddingLeft")),a=p.$el.width(),r=p.$el.height();p.isBigImageReady<1&&l("div",p.$viewer).remove(),"inner"==p.options.type?p.$viewer.css({top:s,left:n,width:a,height:r}).show():"standard"==p.options.type?(e=""==p.options.alignTo?p.$el:l("#"+p.options.alignTo),"left"==p.options.position?(t=e.offset().left-p.options.zoomSize[0]-p.options.offset[0],i=e.offset().top+p.options.offset[1]):"right"==p.options.position&&(t=e.offset().left+e.width()+p.options.offset[0],i=e.offset().top+p.options.offset[1]),p.$viewer.css({top:i,left:t,width:p.options.zoomSize[0],height:p.options.zoomSize[1]}).show(),p.$handlerArea&&(p.scale=a/p.$largeImg.width(),p.$handlerArea.css({width:p.$viewer.width()*p.scale,height:p.$viewer.height()*p.scale}))):"follow"==p.options.type&&p.$viewer.css({width:p.options.zoomSize[0],height:p.options.zoomSize[1],top:o.pageY-p.options.zoomSize[1]/2,left:o.pageX-p.options.zoomSize[0]/2}).show(),p.$handler.css({top:s,left:n,width:a,height:r}).show(),p.options.onShow(p),-1==p.isBigImageReady&&(p.isBigImageReady=0,fastImg(p.options.bigImageSrc,function(){var e;l.trim(l(this).attr("src"))==l.trim(p.options.bigImageSrc)&&(p.$viewer.append('<img src="'+p.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),p.isBigImageReady=1,p.$largeImg=l('<img src="'+p.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),p.$viewer.append(p.$largeImg),"standard"==p.options.type&&(e=a/this.width,p.$handlerArea=l('<div class="zm-handlerarea" style="width:'+p.$viewer.width()*e+"px;height:"+p.$viewer.height()*e+'px"></div>').appendTo(p.$handler),p.scale=e),-1==p.evt.x&&-1==p.evt.y?p.moveHandler(o.pageX,o.pageY):p.moveHandler(p.evt.x,p.evt.y),p.options.showDescription&&p.$el.attr("alt")&&""!=l.trim(p.$el.attr("alt"))&&p.$viewer.append('<div class="'+p.options.descriptionClass+'">'+p.$el.attr("alt")+"</div>"))},function(){},function(){}))},p.changeImage=function(e,o){this.$el.attr("src",e),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof o?o:e,p.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},p.changeZoomSize=function(e,o){p.options.zoomSize=[e,o]},p.destroy=function(){l(document).unbind("mousemove.zoompro"+p.callIndex),this.$el.unbind(".zoompro"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},p.smoothMove=function(e,o){var t,i=parseInt(p.$largeImg.css("top")),i=isNaN(i)?0:i,s=parseInt(p.$largeImg.css("left"));return s=isNaN(s)?0:s,o=parseInt(o),e=parseInt(e),i==o&&s==e?(d.clearTimeout(p.animateTimer),void(p.animateTimer=null)):(t=e-s,i=i+(i=o-i)/Math.abs(i)*Math.ceil(Math.abs(i/10)),t=s+t/Math.abs(t)*Math.ceil(Math.abs(t/10)),p.$viewer.find("img").css({top:i,left:t}),void(p.animateTimer=setTimeout(function(){p.smoothMove(e,o)},10)))},p.init(o)},l.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(){},onHide:function(){}},l.ImageZoom._calltimes=0,l.fn.ImageZoom=function(e){return this.each(function(){new l.ImageZoom(this,e)})}}(jQuery,window);var fastImg=function(){function m(){for(var e=0;e<p.length;e++)p[e].end?p.splice(e--,1):p[e]();p.length||o()}var p=[],d=null,o=function(){clearInterval(d),d=null};return function(e,o,t,i){var s,n,a,r,l,h=new Image;return h.src=e,h.complete?(o.call(h),void(t&&t.call(h))):(n=h.width,a=h.height,h.onerror=function(){i&&i.call(h),s.end=!0,h=h.onload=h.onerror=null},(s=function(){r=h.width,l=h.height,(r!==n||l!==a||1024<r*l)&&(o.call(h),s.end=!0)})(),h.onload=function(){s.end||s(),t&&t.call(h),h=h.onload=h.onerror=null},void(s.end||(p.push(s),null===d&&(d=setInterval(m,40)))))}}();